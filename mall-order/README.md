1. 电商系统的三流：
   1、信息流
   2、资金流
   3、物流
2. 而订单系统作为中枢将三者有机结合在一起，这个环节需要多个模块的数据和信息，同时对这些信息进行加工处理后流向下一个环节。
3. 订单中心：
   1、用户信息
   2、订单信息
   3、商品信息
   4、物流信息
   5、支付信息
   6、促销信息
4. 订单的状态：
   1、代付款【长时间未支付要重置库存锁定】
   2、已发货、待发货 【仓库系统】
   3、待收货、已发货【订单系统同步物流信息】
   4、已完成
   5、已取消
   6、售后中
   订单的流程
   1、虚拟订单
   2、实物订单

5. 接口幂等性
   例如：提交订单 ，保证提交订单的幂等性
   场景：支付，提交订单

   * 那些情况需要防止
     1、用户多次点击按钮
     2、用户页面回退再提交
     3、微服务互相调用，由于网络问题，导致请求失败，feign触发重试机制
     4、其他业务情况

   * 什么情况下需要幂等

     * 以数据库为例，有些操作是天然幂等的，
       * 查询数据
       * 固定更新【某一个字段的更新】
       * 删除
       * 带主键的插入
     * 不是幂等的
       * 运算修改，对某一个字段  +1
       * 不带主键的插入
     * 非主键唯一性，【添加索引】

   * 幂等性的解决方案

     * token机制【验证码】
       * 服务器端是先删，还是后删？ **获取、对比、删除 必须是原子性操作才行**
       * 最终 redis的lua脚本，保证其原子性。
     * 各种锁机制
       * 数据库的悲观锁
         * select * form  where id = 1 for update 
         * id必须是主键或者唯一索引，不让可能造成锁表
       * 数据库的乐观锁【适合于读多写少】
         * 更新带上version，where 携带version更新
     * 分布式锁
     * 各种唯一约束
       * 数据库的唯一约束 【订单号唯一】
       * redis set 防重 【MD5值唯一】
     * 防重表
     * 全局请求唯一ID 
       * ----》nginx ---->链路追踪

   * 订单提交的幂等性【使用token方式】

     